#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <sys/types.h>

void sort(int arr[], int start, int end){
	for(int i=start; i<end; i++){
		for(int j=i+1; j<end; j++){
			if(arr[i] > arr[j]){
				int temp = arr[i];
				arr[i] = arr[j];
				arr[j] = temp;
			}
		}
	}

	printf("Sorted array from Child Process is: ");
	for(int i=start; i<end; i++){
		printf("%d", arr[i]);
	}
	printf("\n");
}

void selection_sort(int arr[], int start, int end) {
	int min_idx, i; 

	for(i = start; i < end-1; i++) 
	{ 
		min_idx = i; 
		for(int j = i+1; j < end; j++) {
			if (arr[j] < arr[min_idx]) {
				min_idx = j;
			} 
		}
		  
		int temp = arr[min_idx];
		arr[min_idx] = arr[i];
		arr[i] = temp;
	} 
	
	printf("Sorted array using selection sort from parent process: ");
	for(int i=start; i<end; i++) {
		printf("%d ", arr[i]);
	}
	printf("\n");
}

int main(){
	int size;
	printf("Enter the Size of the Array: ");
	scanf("%d", &size);
	int arr[size];

	printf("Enter %d numbers in array: ", size);
    for(int i=0; i<size; i++) {
        scanf("%d", &arr[i]);
    }

	int pid = fork();

	if(pid == 0){
		printf("\n-------Hello from child process-------\n");
        printf("Childs parent process id: %d\n", getppid());

        sleep(3);

        printf("Child process id: %d\n", getpid());
        printf("Childs parent process id: %d\n", getppid());
        sort(arr, 0, size);
	}
	else if (pid != 0) {
		printf("\n-------Hello from parent process-------\n");
        printf("Parent process id: %d\n", getpid());
        selection_sort(arr, 0, size);
	}
}

shaunty17@DESKTOP-MSSPH5A:/mnt/d/Shounak/New/Assignment_2$ gcc orphan.c
shaunty17@DESKTOP-MSSPH5A:/mnt/d/Shounak/New/Assignment_2$ ./a.out
Enter the Size of the Array: 5
Enter 5 numbers in array: 5 8 4 2 3


-------Hello from parent process-------
-------Hello from child process-------
Parent process id: 362
Sorted array using selection sort from parent process: 2 3 4 5 8
Childs parent process id: 362
shaunty17@DESKTOP-MSSPH5A:/mnt/d/Shounak/New/Assignment_2$ Child process id: 363
Childs parent process id: 276
Sorted array from Child Process is: 23458
